<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: gwo.rb</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>gwo.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/gwo.rb
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Sep 14 16:10:32 +0200 2009</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <table>
<tr><td valign="top">Author:</td><td>Alex MacCaw - alex AT madebymany DOT co DOT uk (original), Daniel
Bornkessel - daniel AT bornkessel DOT com

</td></tr>
<tr><td valign="top">License:</td><td>MIT

</td></tr>
</table>
<p>
This is a Ruby on Rails plugin (gem) which simplifies Server-Side Dynamic
Section Variations with [Google Website Optimizer](<a
href="http://www.google.com/websiteoptimizer">www.google.com/websiteoptimizer</a>)
as described in the article [Server-Side Dynamic Section Variations on
gwotricks.com](<a
href="http://www.gwotricks.com/2009/05/server-side-dynamic-section-variations.html">www.gwotricks.com/2009/05/server-side-dynamic-section-variations.html</a>)
</p>
<h2>Features:</h2>
<hr size="10"></hr><ul>
<li>very good Ruby on Rails integration

</li>
<li>very simple to use

</li>
<li>support for several sections that should have different variants

</li>
<li>support for named and numbered sections

</li>
<li>include part of a page in more than one variant

</li>
<li>support for google analytics tracking

</li>
<li>kill-switch

</li>
<li>well tested

</li>
</ul>
<p>
The &#8216;Usage&#8217; may look long - but it&#8216;s fairly
straightforward and shouldn&#8216;t take 5 mins.
</p>
<p>
Daniel Bornkessel gwo@bornkessel.com &amp; Alex MacCaw -
alex@madebymany.co.uk (original author)
</p>
<h2>Usage</h2>
<hr size="6"></hr><p>
To use <a href="../../classes/GWO.html">GWO</a>, you need two pages:
</p>
<ul>
<li>A test page containing the multi variant sections

</li>
<li>A page that signifies conversion (i.e. account creation page)

</li>
</ul>
<p>
[Signup for Google Website Optimizer and](<a
href="http://www.google.com/websiteoptimizer">www.google.com/websiteoptimizer</a>):
</p>
<ol>
<li>Click create another experiment

</li>
<li>Click multivariate experiment

</li>
<li>Name it and enter the test/conversion urls

</li>
<li>Select &#8216;You will install and validate the JavaScript tags&#8216;

</li>
<li>Ignore the scripts that are offered, but strip out your account id (uacct)
and test id (both to be found in the Tracking Script). They look like as
follows:

<pre>
   var pageTracker=_gat._getTracker(&quot;UI-6882082-1&quot;);
   pageTracker._trackPageview(&quot;/1662461989/test&quot;);
</pre>
<p>
So, in this example the uacct is &#8216;UA-6882082-1&#8217; and the test id
is 1662461989.
</p>
</li>
<li>Leave google and prepare your source code

</li>
<li>Add the gwo_experiment tag around the code that is supposed to contain the
variants (see the gwo_experiment documentation for possible options)

</li>
<li>in the gwo_experiment you can specify one or more sections your side can
contain. Each section can have several variants. So if you have for example
2 sections with each having 3 variants you would have 6 different possible
combinations on your page.

</li>
<li>Create your gwo_sections, as in the example. The first parameter is the
name of the section, the second the name of the variant(s) in which the
following code should be shown (see example code). You can mix variants by
just passing in more than one identifier. The original variant has the
reserved identifier :original (or 0 if you use numbers)

</li>
<li>The variants can either be identified by numbers (starting at 0 for the
original variant) or be named (see below how to assign the names in the
google web interface).

</li>
<li>Add a gwo_conversion helper tag on your conversion page passing in your
uacct and test id.

</li>
<li>In order to validate the pages in the goole web interface, start rails,
surf to the pages (variant and conversion page) you just created and save
each one locally.

</li>
<li>back in the google web interface, validate your pages by using the
&#8216;offline validation&#8217; link and upload the two pages you just
saved

</li>
<li>as a next step, define the sections. If you used named identifiers in you
rails source code, put the the identifiers name as the content of the
variations in the web interface (i.e. the example below would have two
variants (+ the original variant); one variation would have the CONTENT
(subject &amp; name of the variants are not important)
&#8216;minimalistic&#8217; and the other
&#8216;with_sidebar_and_top_signup_box&#8217; (without the quotes)). If you
use numbered identifiers, just create new variations and leave the content
empty.

</li>
<li>finish up and start the experiment

</li>
<li>lean back and let google collect data for you for the next few days &#8230;
go back an be shocked about the little number of conversions you will
probably get ;)

</li>
</ol>
<h2>Example</h2>
<hr size="8"></hr><p>
&#8230; in haml:
</p>
<pre>
    = gwo_experiment(&quot;1662461989&quot;, &quot;UA-6882082-1&quot;, :signup_box_test, :conditions =&gt; (signed_up? &amp;&amp; country == &quot;de&quot;)) do
      = gwo_section(:signup_box_test, [:with_sidebar_and_top_signup_box, :minimalistic], :ga_tracking =&gt; true, :conditions =&gt; (signed_up? &amp;&amp; country == &quot;de&quot;)) do
        = render :partial =&gt; 'gossib/signup'
        %span I am only visible in the variants :with_sidebar_and_top_signup_box and :minimalistic

      = gwo_section(:signup_box_test, [:original, :with_sidebar_and_top_signup_box], :conditions =&gt; (signed_up? &amp;&amp; country == &quot;de&quot;)) do
        = render :partial =&gt; 'gossib/bookmark_menu'
        = render :partial =&gt; 'gossip/pics', :locals =&gt; {:images       =&gt; @article.images}
        .box#
          %span Hi hi ... I am not visible in :minimalistic

      %span I am visible in every variation

      = gwo_section(:signup_box_test, :original, :conditions =&gt; (signed_up? &amp;&amp; country == &quot;de&quot;)) do
        %span I am only in the original page
</pre>
<p>
&#8230; or in erb:
</p>
<pre>
    &lt;% gwo_experiment(&quot;1662461989&quot;, &quot;UA-6882082-1&quot;, :signup_box_test, :conditions =&gt; (signed_up? &amp;&amp; country == &quot;de&quot;)) do %&gt;
      &lt;% render :partial =&gt; 'gossip/article.html.haml',  :object =&gt; @article %&gt;

      &lt;% gwo_section(:signup_box_test, [:with_sidebar_and_top_signup_box, :minimalistic], :conditions =&gt; (signed_up? &amp;&amp; country == &quot;de&quot;)) do %&gt;
        &lt;%= render :partial =&gt; 'gossib/signup' %&gt;
        &lt;span&gt; I am only visible in the variants :with_sidebar_and_top_signup_box and :minimalistic&lt;/span&gt;
      &lt;% end %&gt;

      &lt;% gwo_section(:signup_box_test, [:original, :with_sidebar_and_top_signup_box], :conditions =&gt; (signed_up? &amp;&amp; country == &quot;de&quot;)) do %&gt;
        &lt;%= render :partial =&gt; 'gossib/bookmark_menu' %&gt;
        &lt;%= render :partial =&gt; 'gossip/pics', :locals =&gt; {:images       =&gt; @article.images} %&gt;
        &lt;div class=&quot;box&quot;&gt;
          &lt;span&gt; Hi hi ... I am not visible in :minimalistic&lt;/span&gt;
      &lt;% end %&gt;

      &lt;span&gt; I am visible in every variation&lt;/span&gt;

      &lt;% gwo_section(:signup_box_test, :original, :conditions =&gt; (signed_up? &amp;&amp; country == &quot;de&quot;)) do %&gt;
        &lt;span&gt; I am only in the original page&lt;/span&gt;
      &lt;% end %&gt;
    &lt;% end %&gt;
</pre>
<h2>Conversion page:</h2>
<hr size="10"></hr><p>
&#8230; haml:
</p>
<pre>
    = gwo_conversion('UA-23902382-1', '1909920434')
</pre>
<p>
&#8230; erb:
</p>
<pre>
    &lt;%= gwo_conversion('UA-23902382-1', '1909920434') %&gt;
</pre>
<p>
Copyright (c) 2009 Made by Many, released under the MIT license
</p>

    </div>

    <div id="requires-list">
      <h3 class="section-bar">Required files</h3>

      <div class="name-list">
      action_view/helpers/capture_helper&nbsp;&nbsp;
      </div>
    </div>

   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>